# -*- mode: yaml -*-

manifest:
  version: 1.0

automations:
  linearb_ai_review:
    if:
      - true
    run:
      - action: code-review@v1
        args:
          approve_on_LGTM: true

  linearb_ai_description:
    if:
      - false
    run:
      - action: describe-changes@v1
        args:
          concat_mode: append

  comment_ai_assistance_prompt:
      if:
        - {{ IS_NOT_A_BOT }}
        - {{ pr.labels | match(regex=r/ðŸ¤– ai-*/) | nope }}
        - {{ pr.comments | filter(attr='commenter', term='gitstream-cm') | filter(attr='content', regex=r/Please mark which AI tools you used/) | nope }}
        - {{ not (files | includes(term='ai_log.jsonl')) }}
      run:
        - action: add-comment@v1
          args:
            comment: |
              Please mark which AI tools you used for this PR by checking the appropriate boxes:
  
              - [ ] GitHub Copilot
              - [ ] Cursor
              - [ ] ChatGPT
              - [ ] Tabnine
              - [ ] JetBrains AI Assistant
              - [ ] VSCode IntelliCode
              - [ ] Claude
              - [ ] Gemini
              - [ ] Other AI tool
              - [ ] No AI tools were used
  
              Tip: If you want to avoid this comment in the future, you can add a label of the format `ðŸ¤– ai-*` when creating your PR.

IS_NOT_A_BOT: {{ pr.author | match(list=['github-actions', 'dependabot', '[bot]']) | nope }}
